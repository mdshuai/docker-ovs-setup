#!/bin/bash -xe
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=0,in_port=1,actions=set_field:10->tun_id,goto_table:1"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=0,in_port=2,actions=set_field:20->tun_id,goto_table:1"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=0,actions=goto_table:1"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,tun_id=10,dl_dst=56:EA:48:6B:75:38,actions=output:1"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,tun_id=20,dl_dst=9A:3E:81:AA:14:E9,actions=output:2"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,dl_dst=72:58:27:37:BF:59,actions=output:10"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,tun_id=20,dl_dst=6A:10:E2:22:4C:BD,actions=output:10"
#ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,tun_id=10,arp,nw_dst=10.244.1.2,actions=output:1"
#ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,tun_id=20,arp,nw_dst=10.244.1.3,actions=output:2"
#ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,arp,nw_dst=10.244.2.2,actions=output:10"
#ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=200,tun_id=20,arp,nw_dst=10.244.2.3,actions=output:10"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,arp,actions=NORMAL"
ovs-ofctl add-flow -O OpenFlow13 obr0 "table=1,priority=100,actions=drop"
